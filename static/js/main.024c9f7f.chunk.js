(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(20),o=a.n(i),c=(a(28),a(29),a(9)),s=a(10),l=a(12),h=a(11),v=a(8),d=a(13),m=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.state={gameGoing:!1,carLocation:0,barriers:[{x:0,y:Math.floor(Math.floor(Math.random()*a.canvasWidth)/a.cellSize)*a.cellSize}],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0},a.moveBarriers=function(){for(var e=a.state,t=e.barriers,r=e.acceleration,n=e.carLocation,i=e.carWidth,o=e.carHeight,c=e.speed,s=e.playerScore,l=Object(v.a)(a),h=l.cellSize,d=l.canvasWidth,m=l.canvasHeight,u=0;u<t.length;u++)t[u].y>m&&(a.setState({playerScore:s+1}),t[u].y=0,t[u].x=Math.floor(Math.floor(Math.random()*d)/h)*h),t[u].y=r?t[u].y+c+20:t[u].y+c,t[u].y>=m-o*h&&t[u].x>=n&&t[u].x<n+i*h&&a.setState({crash:!0,gameGoing:!1});a.setState({barriers:t})},a.addBarrier=function(){var e=a.state,t=e.barriers,r=e.maxBarriersAmount;t.length<r&&t.push({x:10*Math.floor(Math.floor(250*Math.random())/10),y:0})},a.upSpeed=function(){var e=a.state.speed;e<50&&a.setState({speed:e+1})},a.steeringWheel=function(){var e=Object(v.a)(a).cellSize;document.onkeydown=function(t){switch(t.keyCode){case 37:a.state.carOnTheLeft||a.setState({carLocation:a.state.carLocation-e});break;case 39:a.state.carOnTheRight||a.setState({carLocation:a.state.carLocation+e});break;case 38:a.setState({acceleration:!0})}},document.onkeyup=function(e){switch(e.keyCode){case 38:a.setState({acceleration:!1})}}},a.letsGo=function(){a.setState({gameGoing:!0,carLocation:0,barriers:[],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0}),a.steeringWheel(),a.intervalMove=setInterval((function(){return a.moveBarriers()}),50),a.intervalAdd=setInterval((function(){return a.addBarrier()}),6e3),a.intervalSpeed=setInterval((function(){return a.upSpeed()}),6e3)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(e,t){var a=document.getElementById("canvas").getContext("2d"),r=this.state,n=r.carWidth,i=r.carHeight,o=this.cellSize,c=this.canvasWidth,s=this.canvasHeight;a.clearRect(0,0,c,s),a.fillRect(e,s-i*o,n*o,s);for(var l=0;l<this.state.barriers.length;l++)a.fillRect(t[l].x,t[l].y,o,o);this.state.carLocation<=0&&!1===this.state.carOnTheLeft?this.setState({carOnTheLeft:!0}):this.state.carLocation>0&&!0===this.state.carOnTheLeft&&this.setState({carOnTheLeft:!1}),this.state.carLocation>=c-n*o&&!1===this.state.carOnTheRight?this.setState({carOnTheRight:!0}):this.state.carLocation<c-n*o&&!0===this.state.carOnTheRight&&this.setState({carOnTheRight:!1})}},{key:"crash",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed);var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=new Image;a.src="https://image.freepik.com/vector-gratis/bubble-pop-art-of-crash-icon-comunicacion-comica-retro-tema-expresion_18591-10094.jpg",a.onload=function(){t.drawImage(a,0,0,e.width,e.height)}}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.carLocation,a=e.barriers;this.state.crash?this.crash():this.drawFrame(t,a)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game-header"},n.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0413\u043e\u043d\u043a\u0438"),n.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),n.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"),n.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}))}}]),t}(n.a.Component),u=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.state={gameGoing:!1,body:[],apple:{},moveDirection:"toRight",moveDirectionChanged:!1,speed:1,playerScore:0,crash:!1,uroboros:!1},a.moveSnake=function(){var e=a.state,t=e.body,r=t,n=[];switch(e.moveDirection){case"toRight":var i=r[0].x+1,o=r[0].y;n[0]={x:i,y:o};for(var c=1;c<t.length;c++)n[c]=r[c-1];a.setState({body:n});break;case"toTop":var s=r[0].x,l=r[0].y-1;n[0]={x:s,y:l};for(var h=1;h<t.length;h++)n[h]=r[h-1];a.setState({body:n});break;case"toLeft":var v=r[0].x-1,d=r[0].y;n[0]={x:v,y:d};for(var m=1;m<t.length;m++)n[m]=r[m-1];a.setState({body:n});break;case"toBottom":var u=r[0].x,g=r[0].y+1;n[0]={x:u,y:g};for(var f=1;f<t.length;f++)n[f]=r[f-1];a.setState({body:n})}a.setState({moveDirectionChanged:!1})},a.letsGo=function(){a.setState({gameGoing:!0,body:[{x:1,y:0},{x:0,y:0}],moveDirection:"toRight",playerScore:0,crash:!1,uroboros:!1}),a.setApple(),a.intervalAdd=setInterval((function(){return a.moveSnake()}),100),a.changeMoveDirection()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(){var e=document.getElementById("canvas").getContext("2d"),t=this.state,a=t.body,r=t.apple,n=t.playerScore,i=this.cellSize,o=this.canvasWidth,c=this.canvasHeight;e.clearRect(0,0,o,c);var s=!0,l=!1,h=void 0;try{for(var v,d=a[Symbol.iterator]();!(s=(v=d.next()).done);s=!0){var m=v.value;m===a[0]?e.fillStyle="black":e.fillStyle="brown",e.fillRect(m.x*i,m.y*i,i,i)}}catch(p){l=!0,h=p}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}if(a[0].x===r.x&&a[0].y===r.y){var u=a,g=u[u.length-1];u.push(g),this.setState({playerScore:n+1,body:u}),this.setApple()}e.fillStyle="green",e.fillRect(r.x*i,r.y*i,i,i);var f=a[0];a.slice(1).find((function(e){return e.x===f.x&&e.y===f.y}))&&this.setState({crash:!0,uroboros:!0,gameGoing:!1}),(f.x>=o/10||f.x<0||f.y<0||f.y>=c/10)&&this.setState({crash:!0,gameGoing:!1})}},{key:"changeMoveDirection",value:function(){var e=this;document.onkeydown=function(t){if(!e.state.moveDirectionChanged){switch(t.keyCode){case 37:"toRight"!==e.state.moveDirection&&e.setState({moveDirection:"toLeft"});break;case 38:"toBottom"!==e.state.moveDirection&&e.setState({moveDirection:"toTop"});break;case 39:"toLeft"!==e.state.moveDirection&&e.setState({moveDirection:"toRight"});break;case 40:"toTop"!==e.state.moveDirection&&e.setState({moveDirection:"toBottom"})}e.setState({moveDirectionChanged:!0})}}}},{key:"setApple",value:function(){this.setState({apple:{x:Math.floor(Math.floor(Math.random()*this.canvasWidth)/10),y:Math.floor(Math.floor(Math.random()*this.canvasWidth)/10)}})}},{key:"crash",value:function(){var e=this.state,t=e.uroboros,a=e.playerScore;clearInterval(this.intervalAdd);var r,n=document.getElementById("canvas"),i=n.getContext("2d");if(i.clearRect(0,0,n.width,n.height),i.font="24px arial",t){var o=new Image;o.src="https://cdn1.radikalno.ru/uploads/2020/1/7/1b7f7d18cc6f6e4d6c13401e8c2c6cfe-full.png",o.onload=function(){i.drawImage(o,0,0,n.width,n.height)}}0===a?r="\u0431\u0435\u0437 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432...":a>0&&a<10?r="\u043c\u0430\u043b\u043e...":a>=10&&a<20?r="\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e":a>=20&&a<30?r="\u041d\u0435\u043f\u043b\u043e\u0445\u043e!":a>=30&&(r="\u041a\u0440\u0443\u0442\u043e!");var c="\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ".concat(a);i.fillText(c,n.width/2-i.measureText(c).width/2,n.height/2),i.fillText(r,n.width/2-i.measureText(r).width/2,n.height/2+20)}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2)}},{key:"componentDidUpdate",value:function(){this.state.crash?this.crash():this.drawFrame()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalAdd)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game-header"},n.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0417\u043c\u0435\u0439\u043a\u0430"),n.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),n.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}),n.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"))}}]),t}(n.a.Component),g=a(14),f=a(5);var p=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"games-container"},n.a.createElement(g.a,null,n.a.createElement("div",{className:"router-links"},n.a.createElement(g.b,{to:"/snake"},"\u0417\u043c\u0435\u0439\u043a\u0430"),n.a.createElement(g.b,{to:"/racing"},"\u0413\u043e\u043d\u043a\u0438")),n.a.createElement("div",{className:"game-area"},n.a.createElement(f.a,{path:"/",exact:!0,render:function(){return n.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443")}}),n.a.createElement(f.a,{path:"/racing",render:function(){return n.a.createElement(m,{canvasWidth:280,canvasHeight:280})}}),n.a.createElement(f.a,{path:"/snake",render:function(){return n.a.createElement(u,{canvasWidth:280,canvasHeight:280})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.024c9f7f.chunk.js.map