(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(20),o=a.n(r),c=(a(28),a(29),a(9)),s=a(10),l=a(12),h=a(11),m=a(7),v=a(13),d=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},u=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.cellNumberHorizont=a.canvasWidth/a.cellSize,a.state={gameGoing:!1,carLocation:0,barriers:[],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0},a.moveBarriers=function(){for(var e=a.state,t=e.barriers,n=e.acceleration,i=e.carLocation,r=e.carWidth,o=e.carHeight,c=e.speed,s=e.playerScore,l=Object(m.a)(a),h=l.cellSize,v=l.canvasHeight,u=l.cellNumberHorizont,g=0;g<t.length;g++)t[g].y>v&&(a.setState({playerScore:s+1}),t[g].y=0,t[g].x=d(0,u-1)),t[g].y=n?t[g].y+c+20:t[g].y+c,t[g].y>=v-o*h&&t[g].x>=i&&t[g].x<i+r&&a.setState({crash:!0,gameGoing:!1});a.setState({barriers:t})},a.addBarrier=function(){var e=Object(m.a)(a).cellNumberHorizont,t=a.state,n=t.barriers,i=t.maxBarriersAmount;n.length<i&&n.push({x:d(0,e-1),y:0})},a.upSpeed=function(){var e=a.state.speed;e<50&&a.setState({speed:e+1})},a.steeringWheelDown=function(e){switch(e.keyCode){case 37:a.state.carOnTheLeft||a.setState({carLocation:a.state.carLocation-1});break;case 39:a.state.carOnTheRight||a.setState({carLocation:a.state.carLocation+1});break;case 38:a.setState({acceleration:!0})}},a.steeringWheelUp=function(e){switch(e.keyCode){case 38:a.setState({acceleration:!1})}},a.letsGo=function(){var e=Object(m.a)(a).cellNumberHorizont;a.setState({gameGoing:!0,carLocation:0,barriers:[{x:d(0,e-1),y:0}],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0}),a.intervalMove=setInterval((function(){return a.moveBarriers()}),50),a.intervalAdd=setInterval((function(){return a.addBarrier()}),5e3),a.intervalSpeed=setInterval((function(){return a.upSpeed()}),8e3)},a.mobileLeft=function(){a.state.carOnTheLeft||a.setState({carLocation:a.state.carLocation-1})},a.mobileRight=function(){a.state.carOnTheRight||a.setState({carLocation:a.state.carLocation+1})},a}return Object(v.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(e,t){var a=document.getElementById("canvas").getContext("2d"),n=this.state,i=n.carWidth,r=n.carHeight,o=this.cellSize,c=this.canvasWidth,s=this.canvasHeight;a.clearRect(0,0,c,s),a.fillStyle="brown",a.fillRect(e*o,s-r*o,i*o,s),a.fillStyle="#212121";for(var l=0;l<this.state.barriers.length;l++)a.fillRect(t[l].x*o,t[l].y,o,o);e*o<=0&&!1===this.state.carOnTheLeft?this.setState({carOnTheLeft:!0}):e*o>0&&!0===this.state.carOnTheLeft&&this.setState({carOnTheLeft:!1}),e*o>=c-i*o&&!1===this.state.carOnTheRight?this.setState({carOnTheRight:!0}):e*o<c-i*o&&!0===this.state.carOnTheRight&&this.setState({carOnTheRight:!1})}},{key:"crash",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed);var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=new Image;a.src="https://image.freepik.com/vector-gratis/bubble-pop-art-of-crash-icon-comunicacion-comica-retro-tema-expresion_18591-10094.jpg",a.onload=function(){t.drawImage(a,0,0,e.width,e.height)}}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2),window.addEventListener("keydown",this.steeringWheelDown),window.addEventListener("keyup",this.steeringWheelUp)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.carLocation,a=e.barriers;this.state.crash?this.crash():this.drawFrame(t,a)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed),window.removeEventListener("keydown",this.steeringWheelDown),window.removeEventListener("keyup",this.steeringWheelUp)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"game-header"},i.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0413\u043e\u043d\u043a\u0438"),i.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),i.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"),i.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}),i.a.createElement("div",{className:"mobile-buttons"},i.a.createElement("button",{className:"mobile-visible left",onClick:this.mobileLeft},"L"),i.a.createElement("button",{className:"mobile-visible right",onClick:this.mobileRight},"R")))}}]),t}(i.a.Component),g=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.cellNumberHorizont=a.canvasWidth/a.cellSize,a.cellNumberVertical=a.canvasHeight/a.cellSize,a.state={gameGoing:!1,body:[{x:1,y:0},{x:0,y:0}],apple:{},moveDirection:"toRight",moveDirectionChanged:!1,speed:1,playerScore:0,crash:!1,uroboros:!1},a.changeMoveDirection=function(e){if(e&&!a.state.moveDirectionChanged){switch(e.keyCode){case 37:"toRight"!==a.state.moveDirection&&a.setState({moveDirection:"toLeft"});break;case 38:"toBottom"!==a.state.moveDirection&&a.setState({moveDirection:"toTop"});break;case 39:"toLeft"!==a.state.moveDirection&&a.setState({moveDirection:"toRight"});break;case 40:"toTop"!==a.state.moveDirection&&a.setState({moveDirection:"toBottom"})}a.setState({moveDirectionChanged:!0})}},a.moveSnake=function(){var e=a.state,t=e.body,n=t,i=[];switch(e.moveDirection){case"toRight":var r=n[0].x+1,o=n[0].y;i[0]={x:r,y:o};for(var c=1;c<t.length;c++)i[c]=n[c-1];a.setState({body:i});break;case"toTop":var s=n[0].x,l=n[0].y-1;i[0]={x:s,y:l};for(var h=1;h<t.length;h++)i[h]=n[h-1];a.setState({body:i});break;case"toLeft":var m=n[0].x-1,v=n[0].y;i[0]={x:m,y:v};for(var d=1;d<t.length;d++)i[d]=n[d-1];a.setState({body:i});break;case"toBottom":var u=n[0].x,g=n[0].y+1;i[0]={x:u,y:g};for(var f=1;f<t.length;f++)i[f]=n[f-1];a.setState({body:i})}a.setState({moveDirectionChanged:!1})},a.mobileChangeDirectionLeft=function(){"toRight"!==a.state.moveDirection&&a.setState({moveDirection:"toLeft"})},a.mobileChangeDirectionRight=function(){"toLeft"!==a.state.moveDirection&&a.setState({moveDirection:"toRight"})},a.mobileChangeDirectionTop=function(){"toBottom"!==a.state.moveDirection&&a.setState({moveDirection:"toTop"})},a.mobileChangeDirectionBottom=function(){"toTop"!==a.state.moveDirection&&a.setState({moveDirection:"toBottom"})},a.letsGo=function(){a.setState({gameGoing:!0,body:[{x:1,y:0},{x:0,y:0}],moveDirection:"toRight",playerScore:0,crash:!1,uroboros:!1}),a.setApple(),a.intervalAdd=setInterval((function(){return a.moveSnake()}),100),a.changeMoveDirection()},a}return Object(v.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(){var e=document.getElementById("canvas").getContext("2d"),t=this.state,a=t.body,n=t.apple,i=t.playerScore,r=this.cellSize,o=this.canvasWidth,c=this.canvasHeight;e.clearRect(0,0,o,c);var s=!0,l=!1,h=void 0;try{for(var m,v=a[Symbol.iterator]();!(s=(m=v.next()).done);s=!0){var d=m.value;d===a[0]?e.fillStyle="black":e.fillStyle="brown",e.fillRect(d.x*r,d.y*r,r,r)}}catch(p){l=!0,h=p}finally{try{s||null==v.return||v.return()}finally{if(l)throw h}}if(a[0].x===n.x&&a[0].y===n.y){var u=a.slice(),g=u[u.length-1];u.push(g),this.setState({playerScore:i+1,body:u}),this.setApple()}e.fillStyle="green",e.fillRect(n.x*r,n.y*r,r,r);var f=a[0];a.slice(1).find((function(e){return e.x===f.x&&e.y===f.y}))&&this.setState({crash:!0,uroboros:!0,gameGoing:!1}),(f.x>=o/10||f.x<0||f.y<0||f.y>=c/10)&&this.setState({crash:!0,gameGoing:!1})}},{key:"setApple",value:function(){var e=this.cellNumberHorizont;this.setState({apple:{x:d(0,e-1),y:d(0,e-1)}})}},{key:"crash",value:function(){var e=this.state,t=e.uroboros,a=e.playerScore;clearInterval(this.intervalAdd);var n,i=document.getElementById("canvas"),r=i.getContext("2d");if(r.clearRect(0,0,i.width,i.height),r.font="24px arial",t){var o=new Image;o.src="https://cdn1.radikalno.ru/uploads/2020/1/7/1b7f7d18cc6f6e4d6c13401e8c2c6cfe-full.png",o.onload=function(){r.drawImage(o,0,0,i.width,i.height)}}a>=0&&a<10?n="\u043c\u0430\u043b\u043e...":a>=10&&a<20?n="\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e":a>=20&&a<30?n="\u041d\u0435\u043f\u043b\u043e\u0445\u043e!":a>=30&&(n="\u041a\u0440\u0443\u0442\u043e!");var c="\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ".concat(a);r.fillText(c,i.width/2-r.measureText(c).width/2,i.height/2),r.fillText(n,i.width/2-r.measureText(n).width/2,i.height/2+20)}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2),window.addEventListener("keydown",this.changeMoveDirection)}},{key:"componentDidUpdate",value:function(){this.state.crash?this.crash():this.drawFrame()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalAdd),window.removeEventListener("keydown",this.changeMoveDirection)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"game-header"},i.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0417\u043c\u0435\u0439\u043a\u0430"),i.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),i.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}),i.a.createElement("div",{className:"mobile-buttons"},i.a.createElement("button",{className:"mobile-visible left",onClick:this.mobileChangeDirectionLeft},"L"),i.a.createElement("button",{className:"mobile-visible top",onClick:this.mobileChangeDirectionTop},"T"),i.a.createElement("button",{className:"mobile-visible right",onClick:this.mobileChangeDirectionRight},"R"),i.a.createElement("button",{className:"mobile-visible bottom",onClick:this.mobileChangeDirectionBottom},"B")),i.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"))}}]),t}(i.a.Component),f=a(14),p=a(5);var b=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"games-container"},i.a.createElement(f.a,null,i.a.createElement("div",{className:"router-links"},i.a.createElement(f.b,{to:"/snake"},"\u0417\u043c\u0435\u0439\u043a\u0430"),i.a.createElement(f.b,{to:"/racing"},"\u0413\u043e\u043d\u043a\u0438")),i.a.createElement("div",{className:"game-area"},i.a.createElement(p.a,{path:"/",exact:!0,render:function(){return i.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443")}}),i.a.createElement(p.a,{path:"/racing",render:function(){return i.a.createElement(u,{canvasWidth:280,canvasHeight:280})}}),i.a.createElement(p.a,{path:"/snake",render:function(){return i.a.createElement(g,{canvasWidth:280,canvasHeight:280})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.99a7a49c.chunk.js.map