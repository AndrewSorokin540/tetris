(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),o=(a(28),a(29),a(9)),s=a(10),l=a(12),h=a(11),v=a(7),d=a(13),m=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},u=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.cellNumberHorizont=a.canvasWidth/a.cellSize,a.state={gameGoing:!1,carLocation:0,barriers:[],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0},a.moveBarriers=function(){for(var e=a.state,t=e.barriers,n=e.acceleration,r=e.carLocation,i=e.carWidth,c=e.carHeight,o=e.speed,s=e.playerScore,l=Object(v.a)(a),h=l.cellSize,d=l.canvasHeight,u=l.cellNumberHorizont,g=0;g<t.length;g++)t[g].y>d&&(a.setState({playerScore:s+1}),t[g].y=0,t[g].x=m(0,u-1)),t[g].y=n?t[g].y+o+20:t[g].y+o,t[g].y>=d-c*h&&t[g].x>=r&&t[g].x<r+i&&a.setState({crash:!0,gameGoing:!1});a.setState({barriers:t})},a.addBarrier=function(){var e=Object(v.a)(a).cellNumberHorizont,t=a.state,n=t.barriers,r=t.maxBarriersAmount;n.length<r&&n.push({x:m(0,e-1),y:0})},a.upSpeed=function(){var e=a.state.speed;e<50&&a.setState({speed:e+1})},a.steeringWheelDown=function(e){switch(e.keyCode){case 37:a.state.carOnTheLeft||a.setState({carLocation:a.state.carLocation-1});break;case 39:a.state.carOnTheRight||a.setState({carLocation:a.state.carLocation+1});break;case 38:a.setState({acceleration:!0})}},a.steeringWheelUp=function(e){switch(e.keyCode){case 38:a.setState({acceleration:!1})}},a.listener=function(e){console.log(1)},a.letsGo=function(){var e=Object(v.a)(a).cellNumberHorizont;a.setState({gameGoing:!0,carLocation:0,barriers:[{x:m(0,e-1),y:0}],acceleration:!1,crash:!1,carOnTheLeft:!0,carOnTheRight:!1,maxBarriersAmount:20,carHeight:4,carWidth:2,speed:5,playerScore:0}),a.intervalMove=setInterval((function(){return a.moveBarriers()}),50),a.intervalAdd=setInterval((function(){return a.addBarrier()}),5e3),a.intervalSpeed=setInterval((function(){return a.upSpeed()}),8e3)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(e,t){var a=document.getElementById("canvas").getContext("2d"),n=this.state,r=n.carWidth,i=n.carHeight,c=this.cellSize,o=this.canvasWidth,s=this.canvasHeight;a.clearRect(0,0,o,s),a.fillStyle="brown",a.fillRect(e*c,s-i*c,r*c,s),a.fillStyle="#212121";for(var l=0;l<this.state.barriers.length;l++)a.fillRect(t[l].x*c,t[l].y,c,c);e*c<=0&&!1===this.state.carOnTheLeft?this.setState({carOnTheLeft:!0}):e*c>0&&!0===this.state.carOnTheLeft&&this.setState({carOnTheLeft:!1}),e*c>=o-r*c&&!1===this.state.carOnTheRight?this.setState({carOnTheRight:!0}):e*c<o-r*c&&!0===this.state.carOnTheRight&&this.setState({carOnTheRight:!1})}},{key:"crash",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed);var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=new Image;a.src="https://image.freepik.com/vector-gratis/bubble-pop-art-of-crash-icon-comunicacion-comica-retro-tema-expresion_18591-10094.jpg",a.onload=function(){t.drawImage(a,0,0,e.width,e.height)}}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2),window.addEventListener("keydown",this.steeringWheelDown),window.addEventListener("keyup",this.steeringWheelUp)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.carLocation,a=e.barriers;this.state.crash?this.crash():this.drawFrame(t,a)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalMove),clearInterval(this.intervalAdd),clearInterval(this.intervalSpeed),window.removeEventListener("keydown",this.steeringWheelDown),window.removeEventListener("keyup",this.steeringWheelUp)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"game-header"},r.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0413\u043e\u043d\u043a\u0438"),r.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),r.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"),r.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}))}}]),t}(r.a.Component),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).cellSize=10,a.canvasWidth=a.props.canvasWidth,a.canvasHeight=a.props.canvasHeight,a.cellNumberHorizont=a.canvasWidth/a.cellSize,a.cellNumberVertical=a.canvasHeight/a.cellSize,a.state={gameGoing:!1,body:[{x:1,y:0},{x:0,y:0}],apple:{},moveDirection:"toRight",moveDirectionChanged:!1,speed:1,playerScore:0,crash:!1,uroboros:!1},a.changeMoveDirection=function(e){if(e&&!a.state.moveDirectionChanged){switch(e.keyCode){case 37:"toRight"!==a.state.moveDirection&&a.setState({moveDirection:"toLeft"});break;case 38:"toBottom"!==a.state.moveDirection&&a.setState({moveDirection:"toTop"});break;case 39:"toLeft"!==a.state.moveDirection&&a.setState({moveDirection:"toRight"});break;case 40:"toTop"!==a.state.moveDirection&&a.setState({moveDirection:"toBottom"})}a.setState({moveDirectionChanged:!0})}},a.moveSnake=function(){var e=a.state,t=e.body,n=t,r=[];switch(e.moveDirection){case"toRight":var i=n[0].x+1,c=n[0].y;r[0]={x:i,y:c};for(var o=1;o<t.length;o++)r[o]=n[o-1];a.setState({body:r});break;case"toTop":var s=n[0].x,l=n[0].y-1;r[0]={x:s,y:l};for(var h=1;h<t.length;h++)r[h]=n[h-1];a.setState({body:r});break;case"toLeft":var v=n[0].x-1,d=n[0].y;r[0]={x:v,y:d};for(var m=1;m<t.length;m++)r[m]=n[m-1];a.setState({body:r});break;case"toBottom":var u=n[0].x,g=n[0].y+1;r[0]={x:u,y:g};for(var p=1;p<t.length;p++)r[p]=n[p-1];a.setState({body:r})}a.setState({moveDirectionChanged:!1})},a.letsGo=function(){a.setState({gameGoing:!0,body:[{x:1,y:0},{x:0,y:0}],moveDirection:"toRight",playerScore:0,crash:!1,uroboros:!1}),a.setApple(),a.intervalAdd=setInterval((function(){return a.moveSnake()}),100),a.changeMoveDirection()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"drawFrame",value:function(){var e=document.getElementById("canvas").getContext("2d"),t=this.state,a=t.body,n=t.apple,r=t.playerScore,i=this.cellSize,c=this.canvasWidth,o=this.canvasHeight;e.clearRect(0,0,c,o);var s=!0,l=!1,h=void 0;try{for(var v,d=a[Symbol.iterator]();!(s=(v=d.next()).done);s=!0){var m=v.value;m===a[0]?e.fillStyle="black":e.fillStyle="brown",e.fillRect(m.x*i,m.y*i,i,i)}}catch(f){l=!0,h=f}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}if(a[0].x===n.x&&a[0].y===n.y){var u=a.slice(),g=u[u.length-1];u.push(g),this.setState({playerScore:r+1,body:u}),this.setApple()}e.fillStyle="green",e.fillRect(n.x*i,n.y*i,i,i);var p=a[0];a.slice(1).find((function(e){return e.x===p.x&&e.y===p.y}))&&this.setState({crash:!0,uroboros:!0,gameGoing:!1}),(p.x>=c/10||p.x<0||p.y<0||p.y>=o/10)&&this.setState({crash:!0,gameGoing:!1})}},{key:"setApple",value:function(){var e=this.cellNumberHorizont;this.setState({apple:{x:m(0,e-1),y:m(0,e-1)}})}},{key:"crash",value:function(){var e=this.state,t=e.uroboros,a=e.playerScore;clearInterval(this.intervalAdd);var n,r=document.getElementById("canvas"),i=r.getContext("2d");if(i.clearRect(0,0,r.width,r.height),i.font="24px arial",t){var c=new Image;c.src="https://cdn1.radikalno.ru/uploads/2020/1/7/1b7f7d18cc6f6e4d6c13401e8c2c6cfe-full.png",c.onload=function(){i.drawImage(c,0,0,r.width,r.height)}}a>=0&&a<10?n="\u043c\u0430\u043b\u043e...":a>=10&&a<20?n="\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e":a>=20&&a<30?n="\u041d\u0435\u043f\u043b\u043e\u0445\u043e!":a>=30&&(n="\u041a\u0440\u0443\u0442\u043e!");var o="\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ".concat(a);i.fillText(o,r.width/2-i.measureText(o).width/2,r.height/2),i.fillText(n,r.width/2-i.measureText(n).width/2,r.height/2+20)}},{key:"componentDidMount",value:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="18px arial";var a=e.width/2-t.measureText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"').width/2;t.fillText('\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "GO!"',a,e.height/2),window.addEventListener("keydown",this.changeMoveDirection)}},{key:"componentDidUpdate",value:function(){this.state.crash?this.crash():this.drawFrame()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalAdd),window.removeEventListener("keydown",this.changeMoveDirection)}},{key:"render",value:function(){var e,t;return this.state.gameGoing?(e="start-button hidden",t="game no-cursor"):(e="start-button",t="game"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"game-header"},r.a.createElement("span",null,"\u0418\u0433\u0440\u0430: \u0417\u043c\u0435\u0439\u043a\u0430"),r.a.createElement("span",{className:"player-score"},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: ",this.state.playerScore)),r.a.createElement("canvas",{id:"canvas",className:t,ref:"canvas",width:this.props.canvasWidth,height:this.props.canvasHeight}),r.a.createElement("button",{className:e,onClick:this.letsGo},"GO!"))}}]),t}(r.a.Component),p=a(14),f=a(5);var y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"games-container"},r.a.createElement(p.a,null,r.a.createElement("div",{className:"router-links"},r.a.createElement(p.b,{to:"/snake"},"\u0417\u043c\u0435\u0439\u043a\u0430"),r.a.createElement(p.b,{to:"/racing"},"\u0413\u043e\u043d\u043a\u0438")),r.a.createElement("div",{className:"game-area"},r.a.createElement(f.a,{path:"/",exact:!0,render:function(){return r.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443")}}),r.a.createElement(f.a,{path:"/racing",render:function(){return r.a.createElement(u,{canvasWidth:280,canvasHeight:280})}}),r.a.createElement(f.a,{path:"/snake",render:function(){return r.a.createElement(g,{canvasWidth:280,canvasHeight:280})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.0b530177.chunk.js.map